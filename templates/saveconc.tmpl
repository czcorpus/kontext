#*
Copyright (c) 2003-2009  Pavel Rychly

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; version 2
dated June, 1991.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
*#

#if $saveformat == 'xml'
<?xml version="1.0" encoding="$corpencoding"?>

#filter WebSafe
<concordance>

#if $heading
  <heading>
    <corpus>$corpname</corpus>
    <hits>$concsize</hits>
    <query>#slurp
  #for $d in $Desc
$d['arg'] $d['size'] #slurp 
  #end for
</query>
  </heading>
#end if
## kwic lines
<lines>
#set $num = 0
#for $l in $Lines
  <line>
  #if $numbering
    #set $num = $num + 1
    <num>$num</num>
  #end if
    <ref>$l['ref']</ref>#slurp
<left_context>#slurp
    #for $ll in $l['Left']
      #unless $ll['class'] == 'strc'
$ll['str'] #slurp
      #end unless
    #end for
</left_context><kwic>#slurp
    #for $kw in $l['Kwic']
$kw['str'] #slurp
    #end for
</kwic><right_context>#slurp
    #for $rr in $l['Right']
      #unless $rr['class'] == 'strc'
$rr['str'] #slurp
      #end unless
    #end for
</right_context>
  </line>
#end for
</lines>

</concordance>

#end filter
#else
## Text format
#if $heading
\# Corpus: $corpname
\# Hits:   $concsize
  #for $d in $Desc
\#      $d['op']    $d['arg'] $d['size']
  #end for


#end if
## kwic lines
#set $num = 0
#for $l in $Lines
  #if $numbering
    #set $num = $num + 1
$num	#slurp
  #end if
$l['ref']	#slurp
  #if $align_kwic
$l['leftspace'] #slurp
  #end if
    #for $ll in $l['Left']
      #unless $ll['class'] == 'strc'
$ll['str'] #slurp
      #end unless
    #end for
<#slurp
    #for $kw in $l['Kwic']
$kw['str'] #slurp
    #end for
>#slurp
    #if $annotconc
[${l['linegroup']}]
    #end if
    #for $rr in $l['Right']
      #unless $rr['class'] == 'strc'
$rr['str'] #slurp
      #end unless
    #end for

#end for

#end if 
