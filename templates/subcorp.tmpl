#*
Copyright (c) 2003-2009  Pavel Rychly

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; version 2
dated June, 1991.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
*#

#from cmpltmpl.document import document
#extends document

#def title
$_("Subcorpus Info")#slurp
#end def

#def bodyonload
#filter WebSafe
show_subcorpinfo();#slurp
#end filter
#end def

#def main
<script type="text/javascript">
    jQuery(document).ready(function () {
        jQuery('#subcname').focus();
    });
</script>
#filter WebSafe
<form id="subcorpform" action="subcorp">
    <table class="form">
        #filter None
        $corp_sel_node
        #end filter
        ## Subcorpora
        <tbody>
        <tr>
            <th valign="top">
                $_("Subcorpora"):<br/>
                <input type="hidden" name="delete" value="true" />
                #if $SubcorpList
                <select name="subcname" id="subcname" onchange="show_subcorpinfo();"
                        size="#if len($SubcorpList) == 1 then 2 else min(len($SubcorpList), 25)#">
                    #for $s in $SubcorpList
                    #set $selected = ($s.n == $subcname) and 'selected="selected"' or ''
                    <option $selected>$s.n</option>
                    #end for
                </select>
                #else
                <i>$_("no subcorpus")</i>
                #end if
                <br/>

                <i>
                    #if not $_anonymous
                    <a href="subcorp_form?$corpname_url">$_("create new")</a></i>
                #end if
            </th>

            ## Subcorp Info
            <td valign="top">
                <div id="subcorpinfo" class="infobox">
                    #if $subcsize
                    <b>$subcname</b><br/>
                    $subcsize <i>$_("of")</i> $corpsize <i>$_("tokens")</i>
                    #end if
                </div>
            </td>
        </tr>
        </tbody>
    </table>

    #if $SubcorpList and not $_anonymous
    <div class="buttons">
        <input type="submit" value="$_("Delete Selected")" />
    </div>
    #end if
</form>

<script type="text/javascript">
    function show_subcorpinfo() {
        jQuery.ajax({
            url: 'subcorp_info',
            data: jQuery('#subcorpform').serialize(),
            type: 'GET',
            complete: function (data) {
                jQuery('#subcorpinfo').html(data.responseText);
            }
        });
    }
</script>
#end filter
#end def
